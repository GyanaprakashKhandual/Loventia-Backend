<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/framer-motion/10.16.16/framer-motion.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../styles//main.page.css" />
  </head>
  <body>
    <div class="container">
      <aside class="sidebar open" id="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-title">Document</div>
          <button
            class="sidebar-header-toggle"
            id="sidebarHeaderToggle"
            title="Close Sidebar"
          >
            <i class="fas fa-times"></i>
          </button>
          <button
            class="sidebar-toggle-btn"
            id="sidebarToggleBtn"
            title="Toggle Sidebar"
          >
            <i class="fas fa-bars"></i>
          </button>
        </div>

        <div class="sidebar-content">
          <div class="tabs">
            <button class="tab active" data-tab="user">
              <span class="tab-icon"><i class="fas fa-user"></i></span>
              <span class="tab-text">User</span>
            </button>
            <button class="tab" data-tab="reels">
              <span class="tab-icon"><i class="fas fa-film"></i></span>
              <span class="tab-text">Reels</span>
            </button>
            <button class="tab" data-tab="videos">
              <span class="tab-icon"><i class="fas fa-video"></i></span>
              <span class="tab-text">Videos</span>
            </button>
            <button class="tab" data-tab="posts">
              <span class="tab-icon"><i class="fas fa-images"></i></span>
              <span class="tab-text">Posts</span>
            </button>
          </div>
        </div>

        <div class="sidebar-footer">
          <div class="footer-buttons">
            <button class="btn">
              <span class="btn-icon"><i class="fas fa-chart-line"></i></span>
              <span class="btn-text">Dashboard</span>
            </button>
          </div>
        </div>
      </aside>

      <div class="overlay" id="overlay"></div>

      <div class="main-content">
        <div class="top-bar">
          <div class="top-bar-left"></div>
          <div class="top-bar-right">
            <span class="current-tab" id="currentTabDisplay">User</span>
          </div>
        </div>

        <div class="content-area" id="contentArea"></div>
      </div>
    </div>

    <script>
      const sidebar = document.getElementById('sidebar');
      const menuBtn = document.getElementById('menuBtn');
      const closeSidebarBtn = document.getElementById('closeSidebarBtn');
      const closeRightBtn = document.getElementById('closeRightBtn');
      const overlay = document.getElementById('overlay');
      const contentArea = document.getElementById('contentArea');
      const tabs = document.querySelectorAll('.tab');
      const currentTabDisplay = document.getElementById('currentTabDisplay');

      function toggleSidebar() {
        sidebar.classList.toggle('open');
        overlay.classList.toggle('active');

        if (sidebar.classList.contains('open')) {
          if (menuBtn) menuBtn.style.display = 'none';
          if (closeRightBtn) closeRightBtn.style.display = 'block';
        } else {
          if (menuBtn) menuBtn.style.display = 'block';
          if (closeRightBtn) closeRightBtn.style.display = 'none';
        }
      }

      function toggleSidebarCollapse() {
        sidebar.classList.toggle('collapsed');
        localStorage.setItem(
          'sidebarCollapsed',
          sidebar.classList.contains('collapsed')
        );
      }

      if (menuBtn) menuBtn.addEventListener('click', toggleSidebar);
      if (closeSidebarBtn)
        closeSidebarBtn.addEventListener('click', function (e) {
          if (window.innerWidth <= 768) {
            toggleSidebar();
          } else {
            toggleSidebarCollapse();
          }
        });
      if (closeRightBtn) closeRightBtn.addEventListener('click', toggleSidebar);
      if (overlay) overlay.addEventListener('click', toggleSidebar);

      const sidebarToggleBtn = document.getElementById('sidebarToggleBtn');
      if (sidebarToggleBtn) {
        sidebarToggleBtn.addEventListener('click', function (e) {
          e.stopPropagation();
          toggleSidebarCollapse();
        });
      }

      const sidebarHeaderToggle = document.getElementById(
        'sidebarHeaderToggle'
      );
      if (sidebarHeaderToggle) {
        sidebarHeaderToggle.addEventListener('click', function (e) {
          e.stopPropagation();
          toggleSidebarCollapse();
        });
      }

      tabs.forEach((tab) => {
        tab.addEventListener('click', () => {
          tabs.forEach((t) => t.classList.remove('active'));
          tab.classList.add('active');

          const tabName = tab.dataset.tab;
          currentTabDisplay.textContent =
            tabName.charAt(0).toUpperCase() + tabName.slice(1);
          localStorage.setItem('activeTab', tabName);
          loadContent(tabName);

          if (window.innerWidth <= 768 && sidebar.classList.contains('open')) {
            toggleSidebar();
          }
        });
      });

      function loadContent(tabName) {
        const iframeSrc = `${tabName}.html`;

        contentArea.innerHTML = `
                <iframe 
                    src="${iframeSrc}" 
                    style="
                        width: 100%; 
                        height: 100%; 
                        border: none; 
                        
                        opacity: 0;
                        transition: opacity 0.5s ease;
                    "
                    onload="this.style.opacity='1';"
                ></iframe>
            `;
      }

      const savedTab = localStorage.getItem('activeTab') || 'user';
      const tabToActivate = document.querySelector(`[data-tab="${savedTab}"]`);

      if (tabToActivate) {
        tabToActivate.click();
      } else {
        loadContent('user');
      }

      const savedCollapsed =
        localStorage.getItem('sidebarCollapsed') === 'true';
      if (savedCollapsed && window.innerWidth > 768) {
        sidebar.classList.add('collapsed');
      }
      $(function () {
        $('[data-toggle="tooltip"]').tooltip();
      });
    </script>
  </body>
</html>
